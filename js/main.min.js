var sizes=[{sel:[".yotta"],power:7},{sel:[".zetta"],power:6},{sel:["h1",".exa"],power:5},{sel:["h2",".peta"],power:4},{sel:["h3",".tera"],power:3},{sel:["h4",".giga"],power:2},{sel:["h5",".mega"],power:1},{sel:["h6",".kilo"],power:0},{sel:["small",".milli"],power:-1},{sel:[".micro"],power:-2}],$baseFontSize=$("#base-font-size"),$fontSizeUnit=$('[name="font-size-unit"]'),$fontSizeUnitPx=$("#font-size-px"),$baseLineHeight=$("#base-line-height"),$lineHeightUnit=$('[name="line-height-unit"]'),$lineHeightUnitPx=$("#line-height-px"),$typeScale=$("#type-scale"),$typeScaleSelect=$("#type-scale-select"),$biggerFonts=$("#bigger-fonts"),$controls=$("#controls"),$cssOutput=$("#output"),$sampleOutput=$("#sample-styles"),$legacy=$("#legacy"),view=function(a,b){return b||(b={}),b.legacy=$legacy.is(":checked"),prepareTemplate(a,b)},validateEvents=function(){var a=Math.round($fontSizeUnitPx.is(":checked")?$baseFontSize.val():16*$baseFontSize.val()/100),b=Math.round($lineHeightUnitPx.is(":checked")?$baseLineHeight.val():a*$baseLineHeight.val());$baseFontSize.val()&&$baseLineHeight.val()&&$typeScale.val()&&(prepareCSS(a,b,$typeScale.val(),"css-base",$cssOutput),prepareCSS(a,b,$typeScale.val(),"css-sample",$sampleOutput,"-sample"))},calculateValues=function(a,b,c,d){var e=a*Math.pow(c,d)/a,f=b/a;return{fontSize:e,lineHeight:Math.ceil(e/f)*(f/e)}},prepareCSS=function(a,b,c,d,e,f){var g=[],h="",i=a/16*100,j=b/a;sizes.forEach(function(d,e){var h=calculateValues(a,b,c,sizes[e].power),i=sizes[e].sel;f&&(i=[sizes[e].sel[sizes[e].sel.length-1]+f]),g.push(view("css-element",{selectors:i.join(", "),"font-size":h.fontSize.toFixed(4),"font-size-px":Math.round(h.fontSize*a),"line-height":h.lineHeight.toFixed(4),"line-height-px":Math.round(h.lineHeight*b)}))}),h=view(d,{"base-font":i,"base-font-px":a,"base-line-height":j,"base-line-height-px":j*a,"line-height-half":(j/2).toFixed(4),"line-height-half-px":Math.round(b/2),"line-height-quarter":(j/4).toFixed(4),"line-height-quarter-px":Math.round(b/4),"line-height-double":(2*j).toFixed(4),"line-height-double-px":2*b,"type-scale":g.join(""),"bigger-fonts":$biggerFonts.is(":checked")?prepareTemplate("bigger-fonts"):""}),e.html(h)};$controls.on("keyup change submit",function(a){a.preventDefault(),validateEvents()}),$fontSizeUnit.on("change",function(a){a.stopPropagation(),$baseFontSize.val("px"==$(this).val()?16:100),validateEvents()}),$lineHeightUnit.on("change",function(a){a.stopPropagation(),"px"==$(this).val()?($baseLineHeight.val(24),$baseLineHeight.attr("step",1)):($baseLineHeight.val(1.5),$baseLineHeight.attr("step",.001)),validateEvents()}),$typeScaleSelect.on("change",function(a){a.stopPropagation(),$typeScale.val($(this).val()),validateEvents()}),$typeScale.on("keyup change",function(){$typeScaleSelect.val(0)}),$biggerFonts.on("change",function(){validateEvents()}),validateEvents();