var sizes=[{sel:[".yotta"],power:7},{sel:[".zetta"],power:6},{sel:["h1",".exa"],power:5},{sel:["h2",".peta"],power:4},{sel:["h3",".tera"],power:3},{sel:["h4",".giga"],power:2},{sel:["h5",".mega"],power:1},{sel:["h6",".kilo"],power:0},{sel:["small",".milli"],power:-1},{sel:[".micro"],power:-2}],originalFontSize=16,defaultMinWidths=[0,38,60,90],defaultLineHeights=[1.3,1.4,1.5],defaultFontSizes=[100,100,100,110,120,130],defaultTypeScales=[1.067,1.125],breakpointCount=0,$breakpoints=$("#breakpoints"),$btnAdd=$("#btn-add-breakpoint"),$controls=$("#controls"),$cssOutput=$("#output"),$legacy=$("#legacy"),view=function(a,b){return b||(b={}),b.legacy=$legacy.is(":checked"),prepareTemplate(a,b)},convertToPx=function(a){return Math.round(a*originalFontSize)},calculateValues=function(a,b,c,d){var e=a/100*Math.pow(c,d),f=Math.ceil(e/b)*(b/e);return{fontSize:e,lineHeight:f}},typeScales=function(a,b,c,d){var e=[],f="";return sizes.forEach(function(d,f,g){var h=calculateValues(a,b,c,sizes[f].power),i=sizes[f].sel;e.push(view("css-element",{selectors:i.join(", "),"font-size":h.fontSize.toFixed(4),"font-size-px":convertToPx(h.fontSize),"line-height":h.lineHeight.toFixed(4),"line-height-px":convertToPx(h.lineHeight)}))}),f=view(d,{"base-line-height":b,"base-line-height-px":convertToPx(b),"line-height-half":(b/2).toFixed(4),"line-height-half-px":convertToPx(Math.round(b/2)),"line-height-quarter":(b/4).toFixed(4),"line-height-quarter-px":convertToPx(Math.round(b/4)),"line-height-double":(2*b).toFixed(4),"line-height-double-px":convertToPx(2*b),"type-scale":e.join("")})};$controls.on("keyup change submit",function(a){var b,c,d=[],e="";a.preventDefault(),$breakpoints.children().each(function(){var a=$.trim($(this).find(".font-size").val()),e=$.trim($(this).find(".line-height").val()),f=$.trim($(this).find(".type-scale").val()),g=$(this).find(".min-width"),h=g.length;h?d.push(view("media-query",{"min-width":$.trim(g.val()),"font-size":a,"line-height":e,css:typeScales(100,e,f,"scale-base")})):(b=a,c=e,d=d.concat(typeScales(a,e,f,"scale-base")))}),e=[view("css-base",{"base-font":b,"base-line-height":c,main:d.join("")})],$cssOutput.html(e)}),$btnAdd.on("click",function(){{var a=defaultMinWidths.length-1,b=defaultFontSizes.length-1,c=defaultLineHeights.length-1,d=defaultTypeScales.length-1,e=20;new Array(100).join("x")}$breakpoints.append(view("breakpoint",{id:breakpointCount,"min-width":defaultMinWidths[breakpointCount]||defaultMinWidths[a]+(breakpointCount-a)*e,"font-size":defaultFontSizes[breakpointCount]||defaultFontSizes[b],"line-height":defaultLineHeights[breakpointCount]||defaultLineHeights[c]})),$breakpoints.find("tr:last-child .type-scale").val(defaultTypeScales[breakpointCount]||defaultTypeScales[d]),breakpointCount++,$controls.trigger("submit")}),$controls.on("click",".btn-remove-breakpoint",function(a){a.preventDefault(),$(this).parent().parent().remove(),breakpointCount--,$controls.trigger("submit")}),$btnAdd.trigger("click"),$breakpoints.find(".breakpoint-em").html('<span class="infinite">âˆž</span>'),$breakpoints.find(".btn-remove-breakpoint").remove(),$btnAdd.trigger("click"),$btnAdd.trigger("click"),$btnAdd.trigger("click");