var sizes=[{sel:[".yotta"],power:7},{sel:[".zetta"],power:6},{sel:["h1",".exa"],power:5},{sel:["h2",".peta"],power:4},{sel:["h3",".tera"],power:3},{sel:["h4",".giga"],power:2},{sel:["h5",".mega"],power:1},{sel:["h6",".kilo"],power:0},{sel:["small",".milli"],power:-1},{sel:[".micro"],power:-2}],defaultMinWidths=[0,38,60,90],defaultLineHeights=[1.3,1.4,1.5],defaultFontSizes=[100,100,100,110,120,130],defaultTypeScales=[1.067,1.125],breakpointCount=0,$breakpoints=$("#breakpoints"),$btnAdd=$("#btn-add-breakpoint"),$controls=$("#controls"),$cssOutput=$("#output"),$sampleOutput=$("#sample-styles"),$legacy=$("#legacy"),view=function(a,b){return b||(b={}),b.legacy=$legacy.is(":checked"),prepareTemplate(a,b)},calculateValues=function(a,b,c,d){var e=a*Math.pow(c,d)/a,f=b/a;return{fontSize:e,lineHeight:Math.ceil(e/f)*(f/e)}},typeScales=function(a,b,c,d){var e=[],f="",g=a/16*100,h=b/a;return sizes.forEach(function(d,f,g){var h=calculateValues(a,b,c,sizes[f].power),i=sizes[f].sel;e.push(view("css-element",{selectors:i.join(", "),"font-size":h.fontSize.toFixed(4),"font-size-px":Math.round(h.fontSize*a),"line-height":h.lineHeight.toFixed(4),"line-height-px":Math.round(h.lineHeight*b)}))}),f=view(d,{"base-font":g,"base-font-px":a,"base-line-height":h,"base-line-height-px":h*a,"line-height-half":(h/2).toFixed(4),"line-height-half-px":Math.round(b/2),"line-height-quarter":(h/4).toFixed(4),"line-height-quarter-px":Math.round(b/4),"line-height-double":(2*h).toFixed(4),"line-height-double-px":2*b,"type-scale":e.join("")})};$controls.on("keyup change submit",function(a){var b,c,d=[],e="",f=0,g=0;a.preventDefault(),$breakpoints.children().each(function(){var a=$(this).find(".font-size").val(),e=$(this).find(".line-height").val(),h=Math.round(16*a/100),i=Math.round(h*e),j=$(this).find(".type-scale").val(),k=$(this).find(".min-width"),l=k.length,m=f==e&&g==j;l?d.push(m?view("media-query-font-size-only",{"min-width":k.val(),"font-size":a}):view("media-query",{"min-width":k.val(),css:typeScales(h,i,j,"scale-base")})):(b=a,c=e,d=d.concat(typeScales(h,i,j,"scale-base"))),f=e,g=j}),e=[view("css-base",{"base-font":b,"base-line-height":c,main:d.join("")})],$cssOutput.html(e)}),$btnAdd.on("click",function(){{var a=defaultMinWidths.length-1,b=defaultFontSizes.length-1,c=defaultLineHeights.length-1,d=defaultTypeScales.length-1,e=20;new Array(100).join("x")}$breakpoints.append(view("breakpoint",{id:breakpointCount,"min-width":defaultMinWidths[breakpointCount]||defaultMinWidths[a]+(breakpointCount-a)*e,"font-size":defaultFontSizes[breakpointCount]||defaultFontSizes[b],"line-height":defaultLineHeights[breakpointCount]||defaultLineHeights[c]})),$breakpoints.find("tr:last-child .type-scale").val(defaultTypeScales[breakpointCount]||defaultTypeScales[d]),breakpointCount++,$controls.trigger("submit")}),$controls.on("click",".btn-remove-breakpoint",function(a){a.preventDefault(),$(this).parent().parent().remove(),breakpointCount--,$controls.trigger("submit")}),$btnAdd.trigger("click"),$breakpoints.find(".breakpoint-em").html('<span class="infinite">âˆž</span>'),$breakpoints.find(".btn-remove-breakpoint").remove(),$btnAdd.trigger("click"),$btnAdd.trigger("click"),$btnAdd.trigger("click");